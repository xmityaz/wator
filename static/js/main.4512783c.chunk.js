(this.webpackJsonpwator=this.webpackJsonpwator||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),c=(a(16),a(8)),s=a.n(c),l=a(1),u=a(2),h=a(6),m=a(5),p=a(3),d=a(7),f=a(4),g=a.n(f);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e){return"undefined"===typeof e.energy}function w(e){return e[Math.floor(Math.random()*e.length)]}function E(e,t,a){var n=a.boardSize,r=t.indexOf(","),o=Number(t.slice(0,r)),i=Number(t.slice(r+1,t.length)),c=o<=0?"".concat(n.width-1,",").concat(i):"".concat(o-1,",").concat(i),s=o>=n.width?"0,".concat(i):"".concat(o+1,",").concat(i),l=i<=0?"".concat(o,",").concat(n.height-1):"".concat(o,",").concat(i-1),u=i>=n.height?"".concat(o,",0"):"".concat(o,",").concat(i+1),h=[];if(e[c]||h.push(c),e[s]||h.push(s),e[l]||h.push(l),e[u]||h.push(u),h.length>0){var m=w(h);return e[m]=e[t],delete e[t],m}return t}function O(e,t,a,n,r){var o=r.evolutionParams,i=e[a],c=y(i)?o.fishReproducingRate:o.sharkReproducingRate;i.cyclesSinceReproduce>=c&&t!==a&&(e[t]=n(),i.cyclesSinceReproduce=0)}function S(e,t,a){var n=e[t],r=t.indexOf(","),o=Number(t.slice(0,r)),i=Number(t.slice(r+1,t.length)),c=o<=0?"".concat(a.boardSize.width-1,",").concat(i):"".concat(o-1,",").concat(i),s=o>=a.boardSize.width?"0,".concat(i):"".concat(o+1,",").concat(i),l=i<=0?"".concat(o,",").concat(a.boardSize.height-1):"".concat(o,",").concat(i-1),u=i>=a.boardSize.height?"".concat(o,",0"):"".concat(o,",").concat(i+1),h=[];if(e[c]&&y(e[c])&&h.push(c),e[s]&&y(e[s])&&h.push(s),e[l]&&y(e[l])&&h.push(l),e[u]&&y(e[u])&&h.push(u),h.length>0){var m=function(e,t,a){if(e.length>0){var n=w(e);return t[n]=t[a],delete t[a],n}return a}(h,e,t);return n.energy=a.evolutionParams.sharkMaxEnergy,m}return 0===n.energy?(delete e[t],null):(n.energy--,E(e,t,a))}function k(e){var t=e.startParams,a=e.boardSize,n=e.evolutionParams;return function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r<=0)return o;var i=Math.floor(a.width*Math.random()),c=Math.floor(a.height*Math.random()),s="".concat(i,",").concat(c);return o[s]?e(r,o):e(r-1,b({},o,Object(l.a)({},s,r<=t.startSharkNumber?{cyclesSinceReproduce:0,energy:n.sharkMaxEnergy}:{cyclesSinceReproduce:0})))}(t.startFishNumber+t.startSharkNumber)}var P=4,j=4,C=function e(t,a){var n=this,r=t.boardSize;Object(u.a)(this,e),this.canvas=a,this.ctx=void 0,this.drawRect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#0000ff";n.ctx.fillStyle=r,n.ctx.fillRect(e*P,t*j,P,j*a)},this.clear=function(){n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height)},this.drawPetMap=function(e,t){var a=t.boardSize;n.clear();for(var r=0;r<a.width;r++){for(var o={y:0,type:void 0,height:0},i=0;i<a.height;i++){var c=e["".concat(r,",").concat(i)],s=c?y(c)?"fish":"shark":void 0;if(s===o.type)o.height++;else{if(o.type){var l="fish"===o.type?"#0000ff":"#ff0000";n.drawRect(r,o.y,o.height,l)}o={type:s,y:i,height:1}}}if(o.type){var u="fish"===o.type?"#0000ff":"#ff0000";n.drawRect(r,o.y,o.height,u)}}},this.ctx=this.canvas.getContext("2d"),this.canvas.width=r.width*P,this.canvas.height=r.height*P},N=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onInputChange=function(e){var t=e.currentTarget.value,n=e.currentTarget.name;a.props.onChange(Object(l.a)({},n,Number(t)))},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.values;return r.a.createElement("form",null,r.a.createElement("div",{className:"control-inputs"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fish caviar throwing"),r.a.createElement("input",{value:e.fishReproducingRate,type:"number",min:"5",max:"100",name:"fishReproducingRate",className:"form-control",onChange:this.onInputChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Shark pregnancy rate"),r.a.createElement("input",{value:e.sharkReproducingRate,type:"number",min:"5",max:"100",name:"sharkReproducingRate",className:"form-control",onChange:this.onInputChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Shark energy"),r.a.createElement("input",{value:e.sharkMaxEnergy,type:"number",min:"5",max:"50",name:"sharkMaxEnergy",className:"form-control",onChange:this.onInputChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Game speed"),r.a.createElement("input",{value:e.gameSpeed,type:"number",min:"20",max:"1000",name:"gameSpeed",className:"form-control",onChange:this.onInputChange}))))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onInputChange=function(e){var t=e.currentTarget.value,n=e.currentTarget.name;a.props.onChange(Object(l.a)({},n,Number(t)))},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.disabled,a=e.values;return r.a.createElement("form",{id:"initial-controls"},r.a.createElement("div",{className:"control-inputs"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Fish number at start"),r.a.createElement("div",{"data-toggle":"tooltip","data-placement":"right",title:"Stop simulation to change"},r.a.createElement("input",{type:"number",min:"5",max:"100",value:a.startFishNumber,name:"startFishNumber",className:"form-control",onChange:this.onInputChange,disabled:t}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Shark number at start"),r.a.createElement("div",{"data-toggle":"tooltip","data-placement":"right",title:"Stop simulation to change"},r.a.createElement("input",{type:"number",min:"5",max:"100",value:a.startSharkNumber,name:"startSharkNumber",className:"form-control",onChange:this.onInputChange,disabled:t})))))}}]),t}(r.a.Component);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).playground=void 0,a.petMap=void 0,a.gameLoop=void 0,a.canvas=void 0,a.initCanvas=function(e){a.canvas=e},a.step=function(){a.playground.drawPetMap(a.petMap,a.config),function(e,t){var a=Object.keys(e),n=a.filter((function(t){return y(e[t])})),r=a.filter((function(t){return!y(e[t])}));n.forEach((function(a){var n=E(e,a,t);e[n].cyclesSinceReproduce++,O(e,a,n,(function(){return{cyclesSinceReproduce:0}}),t)})),r.forEach((function(a){var n=S(e,a,t);n&&(e[n].cyclesSinceReproduce++,O(e,a,n,(function(){return{cyclesSinceReproduce:0,energy:t.evolutionParams.sharkMaxEnergy}}),t))}))}(a.petMap,a.config)},a.onStart=function(){a.petMap=k(a.config),a.play()},a.pause=function(){a.setState({isRunning:!1}),clearInterval(a.gameLoop)},a.play=function(){a.setState({isRunning:!0}),a.gameLoop=setInterval((function(){return requestAnimationFrame(a.step)}),a.gameSpeed)},a.reset=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.startParams,n=e.evolutionParams;a.setState({startParams:_({},a.state.startParams,{},t),evolutionParams:_({},a.state.evolutionParams,{},n)}),a.playground=new C(a.config,a.canvas)},a.setEvolutionParams=function(e){a.setState({evolutionParams:_({},a.state.evolutionParams,{},e)},(function(){a.state.isRunning&&(clearInterval(a.gameLoop),a.gameLoop=setInterval((function(){return requestAnimationFrame(a.step)}),a.gameSpeed))}))},a.setStartParams=function(e){a.setState({startParams:_({},a.state.startParams,{},e)})},a.state={isRunning:!1,evolutionParams:a.props.initialConfig.evolutionParams,startParams:a.props.initialConfig.startParams},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"config",get:function(){return{boardSize:this.props.initialConfig.boardSize,startParams:this.state.startParams,evolutionParams:this.state.evolutionParams}}},{key:"gameSpeed",get:function(){return this.config.evolutionParams.gameSpeed}}]),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.playground=new C(this.config,this.canvas),this.petMap=k(this.config)}},{key:"render",value:function(){var e=this.props.withControls,t=this.state.isRunning;return r.a.createElement("div",{className:g.a.root},r.a.createElement("div",{className:g.a.oceanWrapper},r.a.createElement("canvas",{ref:this.initCanvas,width:P*this.config.boardSize.width,height:j*this.config.boardSize.height}),!t&&r.a.createElement("div",{className:g.a.overlay},r.a.createElement("div",{className:"control-buttons"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.onStart},"Start"))),t&&r.a.createElement("div",{className:g.a.pauseOverlay},r.a.createElement("div",{className:g.a.pause,onClick:this.pause}))),e&&r.a.createElement("div",{className:g.a.controls},r.a.createElement(R,{disabled:t,onChange:this.setStartParams,values:this.state.startParams}),r.a.createElement(N,{values:this.state.evolutionParams,onChange:this.setEvolutionParams})))}}]),t}(r.a.Component),D={boardSize:{width:150,height:150},evolutionParams:{fishReproducingRate:15,sharkReproducingRate:15,sharkMaxEnergy:5,gameSpeed:50},startParams:{startFishNumber:2e3,startSharkNumber:1e3}},I=function(){return r.a.createElement("div",{className:s.a.root},r.a.createElement("header",{className:s.a.header},"Wator"),r.a.createElement("div",null,"It all started in 1984 when one god-like creature who lived in our neighbor galaxy. He just returned home after visiting Earth. And he was depressed. His own galaxy was beautiful- it had stunning nebulas, one of the biggest and shiniest quasars in the universe and neutron stars spinning million times per second. But there was no life in it like there was on Earth. Now he saw it clearly. All he wanted now was to create life. He started by creating a planet. He knew all life on Earth began in the water so he filled his planet with a crystal blue ocean that covered every bit of the land. And then he created Dave, a fish. He also filled his ocean with endless plankton so that Dave never dies from hunger."),r.a.createElement(M,{withControls:!1,initialConfig:D}),r.a.createElement("div",null,"For a brief moment he was happy. But suddenly he understood that Dave lacks something very important for life. The purpose. He looked at Earth and right away he knew what he should do. He gave Dave an ability to give birth."),r.a.createElement(M,{withControls:!1,initialConfig:D}),r.a.createElement("div",null,"Oh no, Dave went out of control and kept reproducing until the ocean became overcrowded. He wanted Dave to be happy but instead he condemned him and all his family to miserable existence in this uninhabitable world. He had to fix this. And he decided that life will balance life. He created Ed, a shark. Ed will not eat plankton like Dave, he will eat Dave. Its a necessary evil but he knew he should be careful not to make old mistakes. He had to let Ed breed. But he had to also let him die. This way it was just."),r.a.createElement(M,{withControls:!1,initialConfig:D}),r.a.createElement("div",null,"Something was not quite right. This world was dead again. Sharks ate all the fish and died of hunger. He thought that he could fix it by making Ed breed slowly."," "),r.a.createElement(M,{withControls:!0,initialConfig:D}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(e,t,a){e.exports={root:"Ocean_root__2vubK",oceanWrapper:"Ocean_oceanWrapper__pD5FV",overlay:"Ocean_overlay__WeTpR",pauseOverlay:"Ocean_pauseOverlay__2KFj9",pause:"Ocean_pause__3fR0D",stop:"Ocean_stop__152WC"}},8:function(e,t,a){e.exports={root:"App_root__nWMuC",header:"App_header__1Xt5M"}}},[[11,1,2]]]);
//# sourceMappingURL=main.4512783c.chunk.js.map